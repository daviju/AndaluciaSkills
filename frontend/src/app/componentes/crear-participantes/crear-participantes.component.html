<div class="page-container">
    <div class="content-card">
        <div class="content-header">
            <h2>{{isEditing ? 'Editar' : 'Crear'}} Participante</h2>
            <p>{{isEditing ? 'Modifica los datos del participante' : 'AÃ±ade un nuevo participante a AndaluciaSkills'}}</p>
        </div>

        <form #participanteForm="ngForm" (ngSubmit)="onSubmit()" class="needs-validation">
            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre *</label>
                <input 
                    type="text" 
                    class="form-control"
                    id="nombre"
                    name="nombre"
                    [(ngModel)]="participante.nombre"
                    #nombre="ngModel"
                    required
                    [ngClass]="{'is-invalid': nombre.invalid && (nombre.dirty || nombre.touched)}"
                >
                <div class="invalid-feedback" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
                    El nombre es obligatorio
                </div>
            </div>

            <div class="mb-3">
                <label for="apellidos" class="form-label">Apellidos *</label>
                <input 
                    type="text" 
                    class="form-control"
                    id="apellidos"
                    name="apellidos"
                    [(ngModel)]="participante.apellidos"
                    #apellidos="ngModel"
                    required
                    [ngClass]="{'is-invalid': apellidos.invalid && (apellidos.dirty || apellidos.touched)}"
                >
                <div class="invalid-feedback" *ngIf="apellidos.invalid && (apellidos.dirty || apellidos.touched)">
                    Los apellidos son obligatorios
                </div>
            </div>

            <div class="mb-3">
                <label for="centro" class="form-label">Centro Educativo *</label>
                <input 
                    type="text" 
                    class="form-control"
                    id="centro"
                    name="centro"
                    [(ngModel)]="participante.centro"
                    #centro="ngModel"
                    required
                    [ngClass]="{'is-invalid': centro.invalid && (centro.dirty || centro.touched)}"
                >
                <div class="invalid-feedback" *ngIf="centro.invalid && (centro.dirty || centro.touched)">
                    El centro educativo es obligatorio
                </div>
            </div>

            <div class="mb-3">
                <label for="especialidad" class="form-label">Especialidad *</label>
                <select 
                    class="form-control"
                    id="especialidad"
                    name="especialidad_id_especialidad"
                    [(ngModel)]="participante.especialidad_id_especialidad"
                    #especialidad="ngModel"
                    required
                    [ngClass]="{'is-invalid': especialidad.invalid && (especialidad.dirty || especialidad.touched)}"
                >
                    <option [ngValue]="null">Seleccione una especialidad</option>
                    <option *ngFor="let esp of especialidades" [ngValue]="esp.idEspecialidad">
                        {{esp.nombre}}
                    </option>
                </select>
                <div class="invalid-feedback" *ngIf="especialidad.invalid && (especialidad.dirty || especialidad.touched)">
                    Debe seleccionar una especialidad
                </div>
            </div>

            <div class="d-flex justify-content-end mt-4 gap-2">
                <button 
                    type="button" 
                    class="btn btn-secondary" 
                    (click)="cancelar()">
                    Cancelar
                </button>
                <button 
                    type="submit" 
                    class="btn btn-primary"
                    [disabled]="participanteForm.invalid"
                >
                    {{isEditing ? 'Actualizar' : 'Crear'}} Participante
                </button>
            </div>
        </form>
    </div>
</div>